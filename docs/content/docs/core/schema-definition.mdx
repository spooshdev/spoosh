---
title: Schema Definition
description: Define type-safe API schemas with TypeScript
---

Spoosh uses TypeScript types to define your API structure. This gives you full autocomplete and type checking for all API calls.

## Basic Schema

Define your API schema as a nested type structure:

```typescript
import type { Endpoint } from "@spoosh/core";

type User = {
  id: number;
  name: string;
  email: string;
};

type ApiSchema = {
  users: {
    $get: User[]; // Simple form - just the return type
    $post: Endpoint<User, { name: string; email: string }>; // With body
  };
};
```

## Endpoint Types

### Simple Data Type

For endpoints that only return data (no body, query, or formData), you can use the type directly:

```ts twoslash
// @noErrors
import { createClient } from "@spoosh/core";

type User = { id: number; name: string; email: string };
type ApiSchema = {
  users: {
    $get: User[]; // Just the return type - no wrapper needed
  };
};

const api = createClient<ApiSchema>({ baseUrl: "/api" });
// ---cut---
const { data } = await api.users.$get();
```

### Endpoint\<TData\>

For more explicit typing, use the `Endpoint` wrapper:

```ts twoslash
// @noErrors
import type { Endpoint } from "@spoosh/core";
import { createClient } from "@spoosh/core";

type User = { id: number; name: string; email: string };
type ApiSchema = {
  users: {
    $get: Endpoint<User[]>;
  };
};

const api = createClient<ApiSchema>({ baseUrl: "/api" });
// ---cut---
const { data } = await api.users.$get();
```

### Endpoint\<TData, TBody\>

Endpoint with a request body:

```ts twoslash
// @noErrors
import type { Endpoint } from "@spoosh/core";
import { createClient } from "@spoosh/core";

type User = { id: number; name: string; email: string };
type ApiSchema = {
  users: {
    $post: Endpoint<User, { name: string; email: string }>;
  };
};

const api = createClient<ApiSchema>({ baseUrl: "/api" });
// ---cut---
const { data } = await api.users.$post({
  body: { name: "John", email: "john@example.com" },
});
```

### EndpointWithQuery\<TData, TQuery\>

Endpoint with query parameters:

```ts twoslash
// @noErrors
import type { Endpoint, EndpointWithQuery } from "@spoosh/core";
import { createClient } from "@spoosh/core";

type User = { id: number; name: string; email: string };
type ApiSchema = {
  users: {
    $get: EndpointWithQuery<User[], { page?: number; limit?: number }>;
  };
};

const api = createClient<ApiSchema>({ baseUrl: "/api" });
// ---cut---
const { data } = await api.users.$get({
  query: { page: 1, limit: 10 },
});
```

### EndpointWithFormData\<TData, TFormData\>

Endpoint that accepts form data:

```ts twoslash
// @noErrors
import type { EndpointWithFormData } from "@spoosh/core";
import { createClient } from "@spoosh/core";

type ApiSchema = {
  users: {
    avatar: {
      $post: EndpointWithFormData<{ url: string }, { file: File }>;
    };
  };
};

const api = createClient<ApiSchema>({ baseUrl: "/api" });
declare const myFile: File;
// ---cut---
const { data } = await api.users.avatar.$post({
  formData: { file: myFile },
});
```

### EndpointDefinition\<T\>

For full control over all endpoint properties:

```ts twoslash
// @noErrors
import type { EndpointDefinition } from "@spoosh/core";
import { createClient } from "@spoosh/core";

type User = { id: number; name: string; email: string };
type ApiSchema = {
  users: {
    $get: EndpointDefinition<{
      data: User[];
      query: { page?: number; limit?: number };
    }>;
  };
};

const api = createClient<ApiSchema>({ baseUrl: "/api" });
// ---cut---
const { data } = await api.users.$get({
  query: { page: 1, limit: 10 },
});
```

## Dynamic Path Segments

Use `_` to define dynamic path segments:

```typescript
type ApiSchema = {
  users: {
    $get: Endpoint<User[]>;
    _: {
      $get: Endpoint<User>;
      $put: Endpoint<User, Partial<User>>;
      $delete: Endpoint<void>;
    };
  };
};

// Usage
const { data: users } = await api.users.$get(); // GET /users
const { data: user } = await api.users[123].$get(); // GET /users/123
const { data } = await api.users[123].$put({ body: {} }); // PUT /users/123
await api.users[123].$delete(); // DELETE /users/123
```

### Nested Dynamic Segments

```typescript
type ApiSchema = {
  users: {
    _: {
      posts: {
        $get: Endpoint<Post[]>;
        _: {
          $get: Endpoint<Post>;
        };
      };
    };
  };
};

// Usage
await api.users[1].posts.$get(); // GET /users/1/posts
await api.users[1].posts[42].$get(); // GET /users/1/posts/42
```

### Typed Dynamic Params

Use the function syntax for type-safe params:

```typescript
// Function syntax (recommended for type safety)
const { data } = await api.users(":userId").$get({
  params: { userId: "123" },
});

// Bracket syntax (works but no type inference)
const { data } = await api.users[userId].$get();
```

## HTTP Methods

Spoosh supports all common HTTP methods:

| Method    | Type       | Description    |
| --------- | ---------- | -------------- |
| `$get`    | `Endpoint` | GET request    |
| `$post`   | `Endpoint` | POST request   |
| `$put`    | `Endpoint` | PUT request    |
| `$patch`  | `Endpoint` | PATCH request  |
| `$delete` | `Endpoint` | DELETE request |

## Schema Organization

For larger APIs, organize your schema into separate files:

```typescript title="src/api/schema/users.ts"
import type { Endpoint, EndpointWithQuery } from "@spoosh/core";

export type UsersSchema = {
  users: {
    $get: EndpointWithQuery<User[], { page?: number }>;
    $post: Endpoint<User, CreateUserBody>;
    _: {
      $get: Endpoint<User>;
      $put: Endpoint<User, UpdateUserBody>;
      $delete: Endpoint<void>;
    };
  };
};
```

```typescript title="src/api/schema/posts.ts"
import type { Endpoint } from "@spoosh/core";

export type PostsSchema = {
  posts: {
    $get: Endpoint<Post[]>;
    $post: Endpoint<Post, CreatePostBody>;
  };
};
```

```typescript title="src/api/schema/index.ts"
import type { UsersSchema } from "./users";
import type { PostsSchema } from "./posts";

export type ApiSchema = UsersSchema & PostsSchema;
```

## Type Inference from Hono

If you're using Hono on the server, you can automatically infer your schema:

```typescript
import type { HonoToSpoosh } from "@spoosh/hono";
import type { AppType } from "./server";

type ApiSchema = HonoToSpoosh<AppType>;
```

See the [Hono Integration](/docs/integrations/hono) guide for details.

## Summary

| Type                                 | Description                | Example                                                               |
| ------------------------------------ | -------------------------- | --------------------------------------------------------------------- |
| `TData`                              | Simple data type (no body) | `$get: User[]`                                                        |
| `Endpoint<TData>`                    | Explicit endpoint          | `$get: Endpoint<User[]>`                                              |
| `Endpoint<TData, TBody>`             | Endpoint with JSON body    | `$post: Endpoint<User, CreateUserBody>`                               |
| `EndpointWithQuery<TData, TQuery>`   | Endpoint with query params | `$get: EndpointWithQuery<User[], { page: number }>`                   |
| `EndpointWithFormData<TData, TForm>` | Endpoint with form data    | `$post: EndpointWithFormData<Result, { file: File }>`                 |
| `EndpointDefinition<T>`              | Full endpoint definition   | `$get: EndpointDefinition<{ data: User[]; query: { page: number } }>` |
| `_`                                  | Dynamic path segment       | `users: { _: { $get: User } }`                                        |
