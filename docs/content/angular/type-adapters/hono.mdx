---
title: Hono
description: Type-safe API toolkit from your Hono server
---

The `@spoosh/hono` package transforms your Hono app type into Spoosh's ApiSchema format, giving you end-to-end type safety.

<Callout type="info">
  For proper type inference, your Hono routes must follow the [Hono RPC
  guide](https://hono.dev/docs/guides/rpc). Chain your routes directly on the
  app instance and export the app type.
</Callout>

## Installation

```package-install
@spoosh/hono
```

## Setup

### Server (Hono)

Define your Hono routes and export the app type:

```typescript title="server.ts"
import { Hono } from "hono";
import { zValidator } from "@hono/zod-validator";
import { z } from "zod";

const app = new Hono()
  .basePath("/api")
  .get("/posts", (c) => {
    return c.json([
      { id: 1, title: "Hello World" },
      { id: 2, title: "Getting Started" },
    ]);
  })
  .post("/posts", zValidator("json", z.object({ title: z.string() })), (c) => {
    const body = c.req.valid("json");
    return c.json({ id: 3, title: body.title });
  })
  .get("/posts/:id", (c) => {
    const id = c.req.param("id");
    return c.json({ id: Number(id), title: "Post Title" });
  })
  .delete("/posts/:id", (c) => {
    return c.json({ success: true });
  });

// Export the app type for client usage
export type AppType = typeof app;
```

### Client (Spoosh)

Use `HonoToSpoosh` with your Hono app type:

```typescript title="client.ts"
import { Spoosh, StripPrefix } from "@spoosh/core";
import { create } from "@spoosh/angular";
import type { HonoToSpoosh } from "@spoosh/hono";
import type { AppType } from "./server";

// Full schema has prefixed paths: "api/posts", "api/posts/:id"
type FullSchema = HonoToSpoosh<AppType>;

// Since baseUrl already includes "/api", strip the prefix to avoid
// double prefixing (e.g., "api/api/posts")
type ApiSchema = StripPrefix<FullSchema, "api">;

const spoosh = new Spoosh<ApiSchema, Error>("http://localhost:3000/api");

export const { injectRead, injectWrite } = create(spoosh);
```

## Usage

All API calls are fully typed:

```typescript
// GET /api/posts
const { data: posts } = await api("posts").GET();
// posts: { id: number; title: string }[]

// POST /api/posts
const { data: newPost } = await api("posts").POST({
  body: { title: "New Post" }, // body is typed
});
// newPost: { id: number; title: string }

// GET /api/posts/1
const { data: post } = await api("posts/:id").GET({ params: { id: 1 } });
// post: { id: number; title: string }

// DELETE /api/posts/1
await api("posts/:id").DELETE({ params: { id: 1 } });
```

## Type Mapping

| Hono                          | Spoosh                         |
| ----------------------------- | ------------------------------ |
| `c.json(data)`                | Response data type             |
| `zValidator("json", schema)`  | Request body type              |
| `zValidator("query", schema)` | Query params type              |
| `zValidator("form", schema)`  | Form data type                 |
| `/posts/:id`                  | `"posts/:id"` (path-based key) |

## Path Parameters

Dynamic segments (`:id`, `:slug`, etc.) are represented as path-based keys in the schema:

```typescript
// Hono route: /users/:userId/posts/:postId

// Path-based access with params object
api("users/:userId/posts/:postId").GET({
  params: { userId: 123, postId: 456 },
});

// With variables
const userId = 123;
const postId = 456;
api("users/:userId/posts/:postId").GET({
  params: { userId, postId },
});
```

### With Angular

```typescript
import { Component, inject, input } from "@angular/core";
import { injectRead, injectWrite } from "./api/client";

@Component({
  selector: "app-user-profile",
  template: `
    <div>
      <h1>{{ user()?.name }}</h1>
      <button (click)="handleUpdate()">Update</button>
    </div>
  `,
})
export class UserProfileComponent {
  userId = input.required<number>();

  user = injectRead((api) =>
    api("users/:id").GET({ params: { id: this.userId() } })
  );

  updateUser = injectWrite((api) => api("users/:id").PUT());
  deleteUser = injectWrite((api) => api("users/:id").DELETE());

  async handleUpdate() {
    await this.updateUser.trigger({
      params: { id: this.userId() },
      body: { name: "Updated" },
    });
  }
}
```

## Handling Large Apps (TS2589)

Due to Spoosh's flat schema structure, TS2589 errors are rare. If you do encounter them with very large route trees, follow the [Hono RPC best practices](https://hono.dev/docs/guides/rpc) for splitting routes into smaller groups.
